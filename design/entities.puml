@startuml

hide circle
skinparam linetype ortho
skinparam shadowing false
skinparam monochrome true
skinparam DefaultFontName Helvetica
skinparam DefaultFontSize 15

entity Users {
    * userId: integer
    email: varchar
    password: varchar
    firstName: varchar
    lastName: varchar
    type: registrar | student | faculty | researcher
}

together {
    entity Registrars {
        * userId: integer
    }

    entity Students {
        * userId: integer
        isPartTime: boolean
        isGraduate: boolean
        isAlumnus: boolean
    }

    entity Facultys {
        * userId: integer
        isPartTime: boolean
    }

    entity Researchers {
        * userId: integer
    }
}

Users <|-- Registrars
Users <|-- Students
Users <|-- Facultys
Users <|-- Researchers

entity Reports {
    * reportId: integer
    authorId: integer <<FK: Researchers.userId>>
}

entity Holds {
    * holdId: integer
    holdType: academic | financial | health | desciplinary
}

entity StudentHasHold {
    studentId: integer <<FK: Students.userId>>
    holdId: integer
}

entity FacultyAdvisesStudent {
    facultyId: integer <<FK: Facultys.userId>>
    studentId: integer <<FK: Students.userId>>
}

together {

    entity Departments {
        * departmentId: integer
        facultyId: integer <<FK: Facultys.facultyId>>
        departmentChair: varchar
    }

    entity Majors {
        * majorId: integer
        departmentId: integer <<FK: Departments.departmentId>>
        title: varchar
    }

    entity StudentHasMajor {
        * majorId: integer <<FK:Majors.majorId>>
        * userId: integer <<FK: Students.userId>>
    }

    entity Minors {
        * minorId: integer
        departmentId: integer <<FK: Departments.departmentId>>
        title: varchar
    }

    entity StudentHasMinor {
        * minorId: integer <<FK: Minors.minorId>>
        * userId: integer <<FK: Students.userId>>
    }

}

together {
    entity Courses {
        * courseId: integer
        title: varchar
        description: varchar
    }

    entity Prerequisites {
        * courseId: integer <<FK: Courses.courseId>>
        requirements: varchar
    }
}

Prerequisites ||--|{ Courses
Courses ||--o{ Prerequisites

together {

    entity Sections {
        * sectionId: integer
        semesterId: integer <<FK: Semesters.semesterId>>
        courseId: integer  <<FK: Courses.courseId>>
        facultyId: integer <<FK: Facultys.userId>>
        timeslotId: integer  <<FK: TimeSlots.timeslotId>>
        locationId: integer <<FK: Locations.locationId>>
    }

    entity Enrollments {
        * sectionId: integer <<FK: Sections.sectionId>>
        * studentId: integer <<FK: Students.userId>>
        grade: varchar
    }

    together {
        entity Locations {
            * locationId: integer
            buildingId: integer <<FK: Buildings.buildingId>>
            roomId: integer <<FK: Rooms.roomId>>
        }

        entity Rooms {
            * roomId: integer 
            roomNumber: integer
        }

        entity Buildings {
            * buildingId: integer
            buildingName: varchar
        }
    }

    together {
        entity TimeSlots  {
            * timeslotId: integer
            periodId: integer
        }

        entity Semesters {
            * semesterId: integer
            year: integer
            season: winter | spring | summer | fall
        }

        entity Periods {
            * periodId: integer
            days: Mon | Tues | Wed | Thu | Fri | Sat
            startTime: varchar
            endTime: varchar
        }
        
    }
}

together {
     entity Sessions {
        * sessionId: integer
        sectionId: integer <<FK: Sections.sessionId>>
        hostedAt: datetime
    }

    entity StudentAttendsSession { 
        * enrollmentId: integer <<FK: Enrollments.enrollmentId>>
        * studentId: integer <<FK: Students.userId>>
        status: varchar
    }
}

together {

    entity Prerequisites {
        * prereqId: integer
    }

    entity CourseHasPrereq {
        * prereqId: integer
        * courseId: integer <<FK: Courses.courseId>>
    }

    entity PrereqGroupInPrerequisite {
        * groupId: integer
        * prereqId: integer <<FK: AndPrerequisites.prereqId>>
    }

    entity PrereqGroups {
        * groupId: Integer
    }

    entity CourseInPrereqGroup {
        * groupId: integer <<FK: PrereqGroup.orId>>
        * courseId: integer <<FK: Courses.courseId>>
    }
}

Prerequisites ||--o{ CourseHasPrereq
Courses ||--o{ CourseHasPrereq
PrereqGroups ||-o{ PrereqGroupInPrerequisite
Prerequisites ||--o{ PrereqGroupInPrerequisite
Courses ||--o{ CourseInPrereqGroup
PrereqGroups ||--o{ CourseInPrereqGroup

Students ||--|{ FacultyAdvisesStudent
Students ||--o{ StudentHasHold
Students ||----|{ StudentHasMinor
Students ||-----|{ StudentHasMajor
Students ||------|{ StudentAttendsSession

Sessions }o--|| Sections
Sessions ||--o{ StudentAttendsSession

StudentHasHold }o--|| Holds

Facultys ||--o{ FacultyAdvisesStudent
Facultys }|----|| Departments

Reports }o-|| Researchers 

Departments ||--|{ Majors
Departments ||---|{ Minors
Departments ||------o{ Courses
Departments ||------o{ Enrollments

Minors ||---|{ StudentHasMinor
Majors ||---|{ StudentHasMajor

Courses ||-o{ Sections

Sections }|--|| Locations
Sections ||---o{ Enrollments
Sections }|-----|| TimeSlots

TimeSlots }o---|| Semesters
TimeSlots }o---|| Periods

Locations }|--|| Rooms
Locations }|--|| Buildings
 




@enduml